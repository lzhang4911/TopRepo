import java.util.List;

import org.junit.Test;
import org.junit.Assert;

import com.ebay.lzhang.model.GitRepository;
import com.ebay.lzhang.util.JsonUtil;


public class JsonUtilTest {
    @Test
    public void converToSingleGitHubRepository() throws Exception {
        // this has 2 json objects
        String json = "{\"total_count\":43,\"incomplete_results\":false,\"items\":[{\"id\":28648161,\"node_id\":\"MDEwOlJlcG9zaXRvcnkyODY0ODE2MQ==\",\"name\":\"repo1\",\"full_name\":\"eliot-fort/repo1\",\"owner\":{\"login\":\"eliot-fort\",\"id\":10353250,\"node_id\":\"MDQ6VXNlcjEwMzUzMjUw\",\"avatar_url\":\"https://avatars2.githubusercontent.com/u/10353250?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/eliot-fort\",\"html_url\":\"https://github.com/eliot-fort\",\"followers_url\":\"https://api.github.com/users/eliot-fort/followers\",\"following_url\":\"https://api.github.com/users/eliot-fort/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/eliot-fort/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/eliot-fort/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/eliot-fort/subscriptions\",\"organizations_url\":\"https://api.github.com/users/eliot-fort/orgs\",\"repos_url\":\"https://api.github.com/users/eliot-fort/repos\",\"events_url\":\"https://api.github.com/users/eliot-fort/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/eliot-fort/received_events\",\"type\":\"User\",\"site_admin\":false},\"private\":false,\"html_url\":\"https://github.com/eliot-fort/repo1\",\"description\":\"fort repo\",\"fork\":false,\"url\":\"https://api.github.com/repos/eliot-fort/repo1\",\"forks_url\":\"https://api.github.com/repos/eliot-fort/repo1/forks\",\"keys_url\":\"https://api.github.com/repos/eliot-fort/repo1/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/eliot-fort/repo1/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/eliot-fort/repo1/teams\",\"hooks_url\":\"https://api.github.com/repos/eliot-fort/repo1/hooks\",\"issue_events_url\":\"https://api.github.com/repos/eliot-fort/repo1/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/eliot-fort/repo1/events\",\"assignees_url\":\"https://api.github.com/repos/eliot-fort/repo1/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/eliot-fort/repo1/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/eliot-fort/repo1/tags\",\"blobs_url\":\"https://api.github.com/repos/eliot-fort/repo1/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/eliot-fort/repo1/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/eliot-fort/repo1/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/eliot-fort/repo1/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/eliot-fort/repo1/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/eliot-fort/repo1/languages\",\"stargazers_url\":\"https://api.github.com/repos/eliot-fort/repo1/stargazers\",\"contributors_url\":\"https://api.github.com/repos/eliot-fort/repo1/contributors\",\"subscribers_url\":\"https://api.github.com/repos/eliot-fort/repo1/subscribers\",\"subscription_url\":\"https://api.github.com/repos/eliot-fort/repo1/subscription\",\"commits_url\":\"https://api.github.com/repos/eliot-fort/repo1/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/eliot-fort/repo1/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/eliot-fort/repo1/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/eliot-fort/repo1/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/eliot-fort/repo1/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/eliot-fort/repo1/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/eliot-fort/repo1/merges\",\"archive_url\":\"https://api.github.com/repos/eliot-fort/repo1/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/eliot-fort/repo1/downloads\",\"issues_url\":\"https://api.github.com/repos/eliot-fort/repo1/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/eliot-fort/repo1/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/eliot-fort/repo1/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/eliot-fort/repo1/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/eliot-fort/repo1/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/eliot-fort/repo1/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/eliot-fort/repo1/deployments\",\"created_at\":\"2014-12-30T22:47:04Z\",\"updated_at\":\"2014-12-30T22:47:04Z\",\"pushed_at\":\"2014-12-30T22:47:04Z\",\"git_url\":\"git://github.com/eliot-fort/repo1.git\",\"ssh_url\":\"git@github.com:eliot-fort/repo1.git\",\"clone_url\":\"https://github.com/eliot-fort/repo1.git\",\"svn_url\":\"https://github.com/eliot-fort/repo1\",\"homepage\":null,\"size\":0,\"stargazers_count\":0,\"watchers_count\":0,\"language\":null,\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":true,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"open_issues_count\":0,\"license\":null,\"forks\":0,\"open_issues\":0,\"watchers\":0,\"default_branch\":\"master\",\"score\":19.791836},{\"id\":43018021,\"node_id\":\"MDEwOlJlcG9zaXRvcnk0MzAxODAyMQ==\",\"name\":\"GLD-FL15\",\"full_name\":\"Justinsane1992/GLD-FL15\",\"owner\":{\"login\":\"Justinsane1992\",\"id\":14809144,\"node_id\":\"MDQ6VXNlcjE0ODA5MTQ0\",\"avatar_url\":\"https://avatars0.githubusercontent.com/u/14809144?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/Justinsane1992\",\"html_url\":\"https://github.com/Justinsane1992\",\"followers_url\":\"https://api.github.com/users/Justinsane1992/followers\",\"following_url\":\"https://api.github.com/users/Justinsane1992/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/Justinsane1992/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/Justinsane1992/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/Justinsane1992/subscriptions\",\"organizations_url\":\"https://api.github.com/users/Justinsane1992/orgs\",\"repos_url\":\"https://api.github.com/users/Justinsane1992/repos\",\"events_url\":\"https://api.github.com/users/Justinsane1992/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/Justinsane1992/received_events\",\"type\":\"User\",\"site_admin\":false},\"private\":false,\"html_url\":\"https://github.com/Justinsane1992/GLD-FL15\",\"description\":\"Fort Sumter map\",\"fork\":false,\"url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15\",\"forks_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/forks\",\"keys_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/teams\",\"hooks_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/hooks\",\"issue_events_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/events\",\"assignees_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/tags\",\"blobs_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/languages\",\"stargazers_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/stargazers\",\"contributors_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/contributors\",\"subscribers_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/subscribers\",\"subscription_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/subscription\",\"commits_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/merges\",\"archive_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/downloads\",\"issues_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/Justinsane1992/GLD-FL15/deployments\",\"created_at\":\"2015-09-23T18:04:48Z\",\"updated_at\":\"2015-09-23T18:11:23Z\",\"pushed_at\":\"2015-10-06T20:54:34Z\",\"git_url\":\"git://github.com/Justinsane1992/GLD-FL15.git\",\"ssh_url\":\"git@github.com:Justinsane1992/GLD-FL15.git\",\"clone_url\":\"https://github.com/Justinsane1992/GLD-FL15.git\",\"svn_url\":\"https://github.com/Justinsane1992/GLD-FL15\",\"homepage\":null,\"size\":134508,\"stargazers_count\":0,\"watchers_count\":0,\"language\":\"C#\",\"has_issues\":true,\"has_projects\":true,\"has_downloads\":true,\"has_wiki\":true,\"has_pages\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"open_issues_count\":0,\"license\":null,\"forks\":0,\"open_issues\":0,\"watchers\":0,\"default_branch\":\"master\",\"score\":18.709398}]}";
        
        List<GitRepository> list = JsonUtil.fromJsonString(json);
        Assert.assertNotNull(list);
        Assert.assertEquals(2, list.size());
    }
}
